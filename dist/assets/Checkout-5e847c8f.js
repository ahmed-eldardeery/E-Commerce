import{_ as b,L as c,c as A}from"./index-18c915c8.js";import{s as g,P as O,n as R,j as t,F as p,a as n,o as j,i as I,b as i,p as z,q as H,B as u}from"./@mui-48cc8e00.js";import{r as o}from"./react-213325bd.js";import{a as M}from"./react-redux-486f298f.js";import{L as h}from"./react-router-dom-2068f720.js";import{a as V}from"./react-router-1baea72a.js";import"./react-dom-7ddf5457.js";import"./@babel-de422ddc.js";import"./scheduler-04ce0582.js";import"./@reduxjs-a29ed202.js";import"./immer-41fd5235.js";import"./redux-5df2d229.js";import"./redux-thunk-ef899f4c.js";import"./@chec-4e715cfd.js";import"./axios-419cf3fb.js";import"./hoist-non-react-statics-92a0866e.js";import"./react-is-41a81967.js";import"./@emotion-4ba0892a.js";import"./stylis-2d96297d.js";import"./clsx-1229b3e0.js";import"./react-transition-group-c79f5d47.js";import"./use-sync-external-store-94d164a7.js";import"./@remix-run-66cedd4c.js";const q=o.lazy(()=>b(()=>import("./AddressForm-2690287f.js"),["assets/AddressForm-2690287f.js","assets/@mui-48cc8e00.js","assets/react-is-41a81967.js","assets/react-213325bd.js","assets/@babel-de422ddc.js","assets/@emotion-4ba0892a.js","assets/hoist-non-react-statics-92a0866e.js","assets/stylis-2d96297d.js","assets/clsx-1229b3e0.js","assets/react-transition-group-c79f5d47.js","assets/react-dom-7ddf5457.js","assets/scheduler-04ce0582.js","assets/react-hook-form-ad2d7de2.js","assets/react-router-dom-2068f720.js","assets/react-router-1baea72a.js","assets/@remix-run-66cedd4c.js","assets/index-18c915c8.js","assets/react-redux-486f298f.js","assets/use-sync-external-store-94d164a7.js","assets/@reduxjs-a29ed202.js","assets/immer-41fd5235.js","assets/redux-5df2d229.js","assets/redux-thunk-ef899f4c.js","assets/@chec-4e715cfd.js","assets/axios-419cf3fb.js"])),N=o.lazy(()=>b(()=>import("./PaymentFrom-e4b72680.js"),["assets/PaymentFrom-e4b72680.js","assets/index-18c915c8.js","assets/@mui-48cc8e00.js","assets/react-is-41a81967.js","assets/react-213325bd.js","assets/@babel-de422ddc.js","assets/@emotion-4ba0892a.js","assets/hoist-non-react-statics-92a0866e.js","assets/stylis-2d96297d.js","assets/clsx-1229b3e0.js","assets/react-transition-group-c79f5d47.js","assets/react-dom-7ddf5457.js","assets/scheduler-04ce0582.js","assets/react-redux-486f298f.js","assets/use-sync-external-store-94d164a7.js","assets/react-router-dom-2068f720.js","assets/react-router-1baea72a.js","assets/@remix-run-66cedd4c.js","assets/@reduxjs-a29ed202.js","assets/immer-41fd5235.js","assets/redux-5df2d229.js","assets/redux-thunk-ef899f4c.js","assets/@chec-4e715cfd.js","assets/axios-419cf3fb.js","assets/@stripe-60fc8d5a.js","assets/prop-types-4d501b15.js"])),v=["Shipping address","Payment details"],G=g("main")(({theme:e})=>({marginTop:"5%",width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2),[e.breakpoints.up(600)]:{width:600,marginLeft:"auto",marginRight:"auto"}})),J=g(O)(({theme:e})=>({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),[e.breakpoints.down("xs")]:{width:"100%",marginTop:60},[e.breakpoints.up(600+e.spacing(3)*2)]:{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}})),K=g(R)(({theme:e})=>({padding:e.spacing(3,0,5)})),yt=({handleCaptureCheckout:e})=>{const[m,y]=o.useState(0),[l,T]=o.useState(null),[_,x]=o.useState({}),[E,L]=o.useState(!1),D=V(),{cartData:a,isLoading:C,error:f,Order:s}=M(r=>r.MainSlice);if(C)return t(c,{});o.useEffect(()=>{const r=async()=>{try{const d=await A.checkout.generateToken(a.id,{type:"cart"});T(d)}catch(d){console.log(d),D("/E-Commerce/")}};a.id&&a.line_items.length>0&&r()},[a]);const k=()=>y(r=>r+1),B=()=>y(r=>r-1),P=r=>{x(r),k()},F=()=>setTimeout(()=>{L(!0)},1e4),w=()=>m==0?t(q,{checkoutToken:l,next:P}):t(N,{shippingData:_,checkoutToken:l,nextStep:k,backStep:B,handleCaptureCheckout:e,timeout:F});let S=()=>s.customer?n(p,{children:[n("div",{style:{textDecoration:"none"},children:[n(i,{variant:"h5",children:["Thank you for your purchase, ",s.customer.firstname," ",s.customer.lastname]}),n(i,{variant:"subtitle2",children:["Order ref: ",s.customer_reference]})]}),t("br",{}),t(h,{to:"/E-Commerce/",style:{textDecoration:"none"},children:t(u,{variant:"outlined",type:"button",children:"Back to Home"})})]}):E?n(p,{children:[t("div",{children:t(i,{variant:"h5",children:"Thank you for your purchase"})}),t("br",{}),t(h,{to:"/E-Commerce/",style:{textDecoration:"none"},children:t(u,{variant:"outlined",type:"button",children:"Back to Home"})})]}):t(c,{});return f&&(S=()=>n(p,{children:[n(i,{variant:"h5",children:["Error: ",f]}),t("br",{}),t(h,{to:"/E-Commerce/",style:{textDecoration:"none"},children:t(u,{variant:"outlined",type:"button",style:{textDecoration:"none"},children:"Back to home"})})]})),t(p,{children:n(o.Suspense,{fallback:t(c,{}),children:[t(j,{}),t(I,{}),t(G,{children:n(J,{children:[t(i,{variant:"h4",align:"center",children:"Checkout"}),t(K,{activeStep:m,children:v.map(r=>t(z,{children:t(H,{children:r})},r))}),m===v.length?t(S,{}):l?t(w,{}):t(c,{})]})})]})})};export{yt as default};
//# sourceMappingURL=Checkout-5e847c8f.js.map
