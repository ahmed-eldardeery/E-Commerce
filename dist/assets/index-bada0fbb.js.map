{"version":3,"file":"index-bada0fbb.js","sources":["../../src/lib/commerce.js","../../src/store/MainSlice.js","../../src/Theme.js","../../src/components/Loading.jsx","../../src/App.jsx","../../src/store/index.js","../../src/main.jsx"],"sourcesContent":["\r\nimport Commerce from '@chec/commerce.js';;\r\nconst checAPIKey =  import.meta.env.VITE_CHEC_PUBLIC_KEY\r\nconst devEnvironment = process.env.NODE_ENV === 'development';\r\nif (devEnvironment && !checAPIKey) {\r\n  throw Error('Your public API key must be provided as an environment variable named NEXT_PUBLIC_CHEC_PUBLIC_KEY. Obtain your Chec public key by logging into your Chec account and navigate to Setup > Developer, or can be obtained with the Chec CLI via with the command chec whoami');\r\n}\r\n\r\nexport default new Commerce(\r\n  checAPIKey\r\n);\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport commerce from \"../lib/commerce\";\r\nexport const fetchProducts = createAsyncThunk(\r\n  \"MainSlice/fetchProducts\",\r\n  (_, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      const Products = commerce.products.list();\r\n\r\n      return Products;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const fetchCart = createAsyncThunk(\r\n  \"MainSlice/fetchCart\",\r\n  (_, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      const Cart = commerce.cart.retrieve();\r\n      return Cart;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const refreshCart = createAsyncThunk(\r\n  \"MainSlice/refreshCart\",\r\n  (_, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      const Cart = commerce.cart.refresh();\r\n      return Cart;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n)\r\nexport const addToCart = createAsyncThunk(\r\n  \"MainSlice/addToCart\",\r\n  (productId, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      commerce.cart.add(productId, 1);\r\n\r\n      return commerce.cart.retrieve();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const emptyCart = createAsyncThunk(\r\n  \"MainSlice/emptyCart\",\r\n  (_, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      commerce.cart.empty();\r\n      return commerce.cart.retrieve();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeFromCart = createAsyncThunk(\r\n  \"MainSlice/removeFromCart\",\r\n  (itemId, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      commerce.cart.remove(itemId);\r\n      return commerce.cart.retrieve();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const updateCartQty = createAsyncThunk(\r\n  \"MainSlice/updateCartQty\",\r\n  (params, thunkAPI) => {\r\n    const { rejectWithValue } = thunkAPI;\r\n    try {\r\n      commerce.cart.update(params.id, params.quantity);\r\n      return commerce.cart.retrieve();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const MainSlice = createSlice({\r\n  name: \"MainSlice\",\r\n  initialState: {\r\n    productsData: [],\r\n    cartData: {},\r\n    Order : {},\r\n    error: null,\r\n    isLoading: true\r\n  },\r\n  reducers : {\r\n    setOrder: (state,action) => {\r\n      state.Order = action.payload;\r\n    },\r\n    setError: (state, action) => {\r\n      console.log(action.payload)\r\n      state.error = action.payload.data.error.message\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchProducts.fulfilled, (state, action) => {\r\n        state.productsData = action.payload.data;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(fetchProducts.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(fetchProducts.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(fetchCart.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      })\r\n      // .addCase(fetchCart.pending, (state, action) => {\r\n      //   state.isLoading = true;\r\n      // })\r\n      .addCase(refreshCart.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      })\r\n      .addCase(addToCart.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      })\r\n      .addCase(emptyCart.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      })\r\n      .addCase(removeFromCart.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      })\r\n      .addCase(updateCartQty.fulfilled, (state, action) => {\r\n        state.cartData = action.payload;\r\n      });\r\n  }\r\n});\r\nexport const {setOrder , setError } = MainSlice.actions;\r\nexport default MainSlice.reducer;\r\n","import { createTheme  } from \"@mui/material/styles\";\r\n\r\nconst Theme = createTheme({\r\n \r\n  palette: {\r\n    primary: { main: \"#2f4ca8\" },\r\n    secondary: { main: \"#ff214c\" }\r\n  }\r\n});\r\n\r\nexport default Theme;\r\n","import React from 'react'\r\nimport {CircularProgress} from \"@mui/material\"\r\nfunction Loading({height=\"auto\"}) {\r\n  return (\r\n    <div\r\n    style={{\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      height\r\n    }}\r\n    color='primary'\r\n    data-testid=\"circularLoading\"\r\n  >\r\n    <CircularProgress  />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Loading","import React, { useEffect, Suspense, lazy } from \"react\";\r\nimport { ThemeProvider, StyledEngineProvider } from \"@mui/material/styles\";\r\nimport { createBrowserRouter, RouterProvider } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  fetchProducts,\r\n  fetchCart,\r\n  refreshCart,\r\n  setOrder,\r\n  setError\r\n} from \"./store/MainSlice\";\r\nimport Theme from \"./Theme.js\";\r\nimport Loading from \"./components/Loading\";\r\nimport commerce from \"./lib/commerce\"\r\nconst ErrorPage = lazy(() => import(\"./error-page\"));\r\nconst Products = lazy(() => import(\"./components/products/Products\"));\r\nconst Navbar = lazy(() => import(\"./components/products/Navbar/Navbar\"));\r\nconst Cart = lazy(() => import(\"./components/Cart/Cart\"));\r\nconst Checkout = lazy(() =>\r\n  import(\"./components/CheckoutForm/Checkout/Checkout\")\r\n);\r\n\r\nfunction App() {\r\n  const Dispatch = useDispatch();\r\n  const { isLoading } = useSelector((state) => state.MainSlice);\r\n\r\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\r\n    try {\r\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, {\r\n        ...newOrder\r\n      });\r\n\r\n      Dispatch(setOrder(incomingOrder));\r\n      Dispatch(refreshCart());\r\n    } catch (error) {\r\n      Dispatch(setError(error));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      Dispatch(fetchCart());\r\n    } else {\r\n      Dispatch(fetchProducts());\r\n    }\r\n  }, [isLoading]);\r\n  if (isLoading) {\r\n    return <Loading height=\"95vh\"/>;\r\n  }\r\n  const router = createBrowserRouter([\r\n    {\r\n      element: <Navbar />,\r\n      errorElement: <ErrorPage />,\r\n      children: [\r\n        {\r\n          path: \"/E-Commerce\",\r\n          element: <Products />\r\n        },\r\n        {\r\n          path: \"/E-Commerce/cart\",\r\n          element: <Cart />\r\n        },\r\n        {\r\n          path: \"/E-Commerce/checkout\",\r\n          element: <Checkout handleCaptureCheckout={handleCaptureCheckout} />\r\n        }\r\n      ]\r\n    }\r\n  ]);\r\n\r\n  return (\r\n    <div>\r\n      <StyledEngineProvider injectFirst>\r\n        <ThemeProvider theme={Theme}>\r\n          <Suspense fallback={<Loading height=\"95vh\"/>}>\r\n            <RouterProvider router={router}></RouterProvider>\r\n          </Suspense>\r\n        </ThemeProvider>\r\n      </StyledEngineProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport MainSlice from \"./MainSlice\";\r\n const store = configureStore({\r\n  reducer: {  MainSlice: MainSlice }, \r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware({\r\n    immutableCheck: false,\r\n    serializableCheck: false,\r\n  })\r\n});\r\nexport default store","import React from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\n\r\nconst root = createRoot(document.getElementById(\"root\"));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>\r\n);\r\n"],"names":["checAPIKey","commerce","Commerce","fetchProducts","createAsyncThunk","_","thunkAPI","rejectWithValue","error","fetchCart","refreshCart","addToCart","productId","emptyCart","removeFromCart","itemId","updateCartQty","params","MainSlice","createSlice","state","action","builder","setOrder","setError","MainSlice$1","Theme","createTheme","Loading","height","jsx","CircularProgress","ErrorPage","lazy","__vitePreload","Products","Navbar","Cart","Checkout","App","Dispatch","useDispatch","isLoading","useSelector","handleCaptureCheckout","checkoutTokenId","newOrder","incomingOrder","useEffect","router","createBrowserRouter","StyledEngineProvider","ThemeProvider","Suspense","RouterProvider","store","configureStore","getDefaultMiddleware","root","createRoot","React","Provider"],"mappings":"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"}